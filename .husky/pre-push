#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run full test suite with coverage
echo "ğŸ§ª Running full test suite with coverage..."
npm run test:coverage || {
  echo "âŒ Tests with coverage failed"
  exit 1
}

# Run security analysis
echo "ğŸ”’ Running security analysis..."
npm run security:check || {
  echo "âš ï¸  Security check completed with warnings (non-blocking)"
}

# Check for contract size compliance
echo "ğŸ“ Verifying contract size limits..."
npm run size || {
  echo "âš ï¸  Contract size verification completed"
}

echo "âœ… All pre-push checks passed! Safe to push."
